# -*- coding: utf-8 -*-
"""
常數定義 - 注音符號與相關映射
"""

# 插件資訊
ADDON_ID = "script.input.zhuyin"
ADDON_NAME = "注音輸入法"

# 注音符號定義
# 聲母 (21個)
INITIALS = [
    'ㄅ', 'ㄆ', 'ㄇ', 'ㄈ',  # 唇音
    'ㄉ', 'ㄊ', 'ㄋ', 'ㄌ',  # 舌尖音
    'ㄍ', 'ㄎ', 'ㄏ',        # 舌根音
    'ㄐ', 'ㄑ', 'ㄒ',        # 舌面音
    'ㄓ', 'ㄔ', 'ㄕ', 'ㄖ',  # 捲舌音
    'ㄗ', 'ㄘ', 'ㄙ',        # 舌尖前音
]

# 介音 (3個)
MEDIALS = ['ㄧ', 'ㄨ', 'ㄩ']

# 韻母 (13個)
FINALS = [
    'ㄚ', 'ㄛ', 'ㄜ', 'ㄝ',
    'ㄞ', 'ㄟ', 'ㄠ', 'ㄡ',
    'ㄢ', 'ㄣ', 'ㄤ', 'ㄥ',
    'ㄦ',
]

# 聲調 (5個)
TONES = {
    '': 1,      # 一聲 (無標記)
    'ˊ': 2,     # 二聲
    'ˇ': 3,     # 三聲
    'ˋ': 4,     # 四聲
    '˙': 5,     # 輕聲
}

TONE_MARKS = ['', 'ˊ', 'ˇ', 'ˋ', '˙']

# 所有注音符號
ALL_ZHUYIN = INITIALS + MEDIALS + FINALS + TONE_MARKS[1:]

# 標準鍵盤對照 (大千式鍵盤)
KEYBOARD_MAP = {
    '1': 'ㄅ', 'q': 'ㄆ', 'a': 'ㄇ', 'z': 'ㄈ',
    '2': 'ㄉ', 'w': 'ㄊ', 's': 'ㄋ', 'x': 'ㄌ',
    '3': 'ˇ',  'e': 'ㄍ', 'd': 'ㄎ', 'c': 'ㄏ',
    '4': 'ˋ',  'r': 'ㄐ', 'f': 'ㄑ', 'v': 'ㄒ',
    '5': 'ㄓ', 't': 'ㄔ', 'g': 'ㄕ', 'b': 'ㄖ',
    '6': 'ˊ',  'y': 'ㄗ', 'h': 'ㄘ', 'n': 'ㄙ',
    '7': '˙',  'u': 'ㄧ', 'j': 'ㄨ', 'm': 'ㄩ',
    '8': 'ㄚ', 'i': 'ㄛ', 'k': 'ㄜ', ',': 'ㄝ',
    '9': 'ㄞ', 'o': 'ㄟ', 'l': 'ㄠ', '.': 'ㄡ',
    '0': 'ㄢ', 'p': 'ㄣ', ';': 'ㄤ', '/': 'ㄥ',
    '-': 'ㄦ',
}

# 反向映射
ZHUYIN_TO_KEY = {v: k for k, v in KEYBOARD_MAP.items()}

# CEC 按鍵代碼
CEC_KEYS = {
    'select': 0x00,
    'up': 0x01,
    'down': 0x02,
    'left': 0x03,
    'right': 0x04,
    'exit': 0x0D,
    'back': 0x0D,
    '0': 0x20, '1': 0x21, '2': 0x22, '3': 0x23, '4': 0x24,
    '5': 0x25, '6': 0x26, '7': 0x27, '8': 0x28, '9': 0x29,
    'red': 0x72,
    'green': 0x73,
    'yellow': 0x74,
    'blue': 0x75,
}

# UI 常數
WINDOW_ID = 10147  # 自訂視窗 ID
KEYBOARD_ROWS = 5
KEYBOARD_COLS = 10

# 鍵盤佈局
KEYBOARD_LAYOUT = [
    ['ㄅ', 'ㄉ', 'ˇ',  'ˋ',  'ㄓ', 'ˊ',  '˙',  'ㄚ', 'ㄞ', 'ㄢ'],
    ['ㄆ', 'ㄊ', 'ㄍ', 'ㄐ', 'ㄔ', 'ㄗ', 'ㄧ', 'ㄛ', 'ㄟ', 'ㄣ'],
    ['ㄇ', 'ㄋ', 'ㄎ', 'ㄑ', 'ㄕ', 'ㄘ', 'ㄨ', 'ㄜ', 'ㄠ', 'ㄤ'],
    ['ㄈ', 'ㄌ', 'ㄏ', 'ㄒ', 'ㄖ', 'ㄙ', 'ㄩ', 'ㄝ', 'ㄡ', 'ㄥ'],
    ['符號', '空格', '刪除', 'ㄦ', 'ABC', '', '', '', '', '確認'],
]

# 功能鍵索引
FUNC_KEYS = {
    'symbol': (4, 0),
    'space': (4, 1),
    'backspace': (4, 2),
    'er': (4, 3),
    'abc': (4, 4),
    'enter': (4, 9),
}

# 候選詞設定
MAX_CANDIDATES = 9
CANDIDATES_PER_PAGE = 9

# 資料庫設定
DB_PHRASES = "phrases.db"
DB_USER = "user_phrases.db"

# 輸入狀態
class InputState:
    IDLE = 0        # 待機
    COMPOSING = 1   # 組字中
    SELECTING = 2   # 選字中

# 符號表
SYMBOLS_FULL = [
    '，', '。', '、', '；', '：', '？', '！',
    '「', '」', '『', '』', '（', '）', '【', '】',
    '—', '…', '～', '·', '《', '》', '〈', '〉',
]

SYMBOLS_HALF = [
    ',', '.', '/', ';', ':', '?', '!',
    '[', ']', '{', '}', '(', ')', '<', '>',
    '-', '_', '~', '@', '#', '$', '%', '&',
]
